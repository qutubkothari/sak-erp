# ğŸ¨ Trace Product Feature - Visual Architecture

## User Interface Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Product Traceability                        â† Back to UID Mgmt   â”‚
â”‚  Complete lifecycle tracking from supplier to customer               â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [Enter UID: UID-SAIF-KOL-FG-000123-A1  ]  [Trace Product]   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PRODUCT SUMMARY                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UID          â”‚ Product      â”‚ Status       â”‚ Location         â”‚  â”‚
â”‚  â”‚ ...FG-123-A1 â”‚ Motor-500W   â”‚ SHIPPED ğŸŸ¢   â”‚ Mumbai Warehouse â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… COMPLETE TIMELINE          â”‚  ğŸ¢ VENDOR DETAILS                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â— ğŸ“¦ RECEIVED            â”‚  â”‚  â”‚ Code: VEND-001               â”‚ â”‚
â”‚  â”‚   â””â”€ 2025-11-01 10:00 AM â”‚  â”‚  â”‚ Name: ABC Steel Industries   â”‚ â”‚
â”‚  â”‚   â””â”€ Warehouse-A         â”‚  â”‚  â”‚ Contact: rajesh@abcsteel.com â”‚ â”‚
â”‚  â”‚   â””â”€ By: supervisor@...  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                          â”‚  â”‚                                     â”‚
â”‚  â”‚ â— ğŸ” QC_PASSED           â”‚  â”‚  âœ… QUALITY CHECKPOINTS            â”‚
â”‚  â”‚   â””â”€ 2025-11-01 02:30 PM â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   â””â”€ QC Lab              â”‚  â”‚  â”‚ âœ“ INCOMING_QC: PASSED        â”‚ â”‚
â”‚  â”‚   â””â”€ By: qc_inspector@...â”‚  â”‚  â”‚   2025-11-01 02:30 PM        â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚  â”‚   Inspector: qc@company.com  â”‚ â”‚
â”‚  â”‚ â— ğŸ­ IN_PRODUCTION       â”‚  â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚   â””â”€ 2025-11-05 09:15 AM â”‚  â”‚  â”‚ âœ“ IN_PROCESS_QC: PASSED      â”‚ â”‚
â”‚  â”‚   â””â”€ Assembly Line 1     â”‚  â”‚  â”‚   2025-11-05 11:00 AM        â”‚ â”‚
â”‚  â”‚   â””â”€ By: operator@...    â”‚  â”‚  â”‚   Inspector: prod_qc@...     â”‚ â”‚
â”‚  â”‚                          â”‚  â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚ â— ğŸšš SHIPPED             â”‚  â”‚  â”‚ âœ“ FINAL_QC: PASSED           â”‚ â”‚
â”‚  â”‚   â””â”€ 2025-11-10 03:00 PM â”‚  â”‚  â”‚   2025-11-08 04:00 PM        â”‚ â”‚
â”‚  â”‚   â””â”€ Customer Site       â”‚  â”‚  â”‚   Inspector: final_qc@...    â”‚ â”‚
â”‚  â”‚   â””â”€ By: logistics@...   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                     â”‚
â”‚                                 â”‚  ğŸ‘¤ CUSTOMER DETAILS                â”‚
â”‚                                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                 â”‚  â”‚ Name: TechCorp Industries    â”‚ â”‚
â”‚                                 â”‚  â”‚ Location: ğŸ“ Mumbai - 400001 â”‚ â”‚
â”‚                                 â”‚  â”‚ Delivery: 2025-11-10         â”‚ â”‚
â”‚                                 â”‚  â”‚ Invoice: INV-2025-456        â”‚ â”‚
â”‚                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ³ COMPONENT TREE                                                    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1  UID-SAIF-KOL-RM-000045-B2                    QC: PASSED âœ…â”‚    â”‚
â”‚  â”‚    Item: STEEL-PLATE-304 | Batch: BATCH-2025-001            â”‚    â”‚
â”‚  â”‚    Vendor: ABC Steel Industries | Received: 2025-10-25      â”‚    â”‚
â”‚  â”‚    [â†’ Trace this component]                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 2  UID-SAIF-KOL-RM-000067-C3                    QC: PASSED âœ…â”‚    â”‚
â”‚  â”‚    Item: BEARING-6205 | Batch: BATCH-2025-012               â”‚    â”‚
â”‚  â”‚    Vendor: XYZ Bearings Ltd | Received: 2025-10-28          â”‚    â”‚
â”‚  â”‚    [â†’ Trace this component]                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 3  UID-SAIF-KOL-RM-000089-D4                    QC: PASSED âœ…â”‚    â”‚
â”‚  â”‚    Item: MOTOR-500W | Batch: BATCH-2025-008                 â”‚    â”‚
â”‚  â”‚    Vendor: PowerTech Motors | Received: 2025-11-01          â”‚    â”‚
â”‚  â”‚    [â†’ Trace this component]                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERFACE                           â”‚
â”‚              (Next.js Frontend Component)                   â”‚
â”‚         /dashboard/uid/trace/page.tsx                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ HTTP GET Request
                       â”‚ /api/v1/uid/trace/:uid
                       â”‚ + JWT Token
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  API CONTROLLER                             â”‚
â”‚        uid-supabase.controller.ts                           â”‚
â”‚        @Get('trace/:uid')                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Call getCompleteTrace(req, uid)
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SERVICE LAYER                               â”‚
â”‚          uid-supabase.service.ts                            â”‚
â”‚          getCompleteTrace() method                          â”‚
â”‚                                                             â”‚
â”‚  Steps:                                                     â”‚
â”‚  1ï¸âƒ£ Fetch main UID record with item details               â”‚
â”‚  2ï¸âƒ£ Parse lifecycle events from JSON                       â”‚
â”‚  3ï¸âƒ£ Extract vendor from GRN reference                      â”‚
â”‚  4ï¸âƒ£ Filter quality checkpoints from lifecycle              â”‚
â”‚  5ï¸âƒ£ Fetch child UIDs (components) with details             â”‚
â”‚  6ï¸âƒ£ Fetch parent UIDs (finished products)                  â”‚
â”‚  7ï¸âƒ£ Extract customer from shipping events                  â”‚
â”‚  8ï¸âƒ£ Return consolidated trace object                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Multiple Supabase Queries
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SUPABASE DATABASE                              â”‚
â”‚                                                             â”‚
â”‚  Tables Used:                                               â”‚
â”‚  â”œâ”€ uid_registry (main UID records)                        â”‚
â”‚  â”œâ”€ items (product/material details)                       â”‚
â”‚  â”œâ”€ vendors (supplier information)                         â”‚
â”‚  â”œâ”€ grn (goods receipt notes)                              â”‚
â”‚  â”œâ”€ production_assemblies (component linking)              â”‚
â”‚  â””â”€ sales_orders (customer orders - future)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Lifecycle Event Structure

```json
{
  "stage": "RECEIVED",
  "timestamp": "2025-11-01T10:00:00Z",
  "location": "Warehouse-A",
  "reference": "GRN-2025-11-001",
  "user": "supervisor@company.com"
}
```

**Stored as JSON array in `uid_registry.lifecycle` column**

---

## Component Relationship Diagram

```
                   Supplier (ABC Steel)
                         â”‚
                         â”‚ GRN-2025-11-001
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Raw Material UID                  â”‚
        â”‚  UID-SAIF-KOL-RM-000045-B2        â”‚
        â”‚  Item: STEEL-PLATE-304             â”‚
        â”‚  Batch: BATCH-2025-001             â”‚
        â”‚  Status: AVAILABLE â†’ CONSUMED      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Used in production
                     â”‚ (child_uids array)
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Finished Product UID              â”‚
        â”‚  UID-SAIF-KOL-FG-000123-A1        â”‚
        â”‚  Item: MOTOR-ASSEMBLY-500W         â”‚
        â”‚  Status: AVAILABLE â†’ SHIPPED       â”‚
        â”‚  parent_uids: [...links back...]   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Delivered to customer
                     â”‚ (lifecycle event)
                     â–¼
           Customer (TechCorp Industries)
           Location: Mumbai, Maharashtra
           Invoice: INV-2025-456
```

---

## UID Linking Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When Production Assembly Completes:                        â”‚
â”‚                                                             â”‚
â”‚  1. Generate finished product UID                           â”‚
â”‚     â†’ UID-SAIF-KOL-FG-000123-A1                            â”‚
â”‚                                                             â”‚
â”‚  2. Link component UIDs (child_uids):                       â”‚
â”‚     â†’ ["UID-...-RM-000045-B2",                             â”‚
â”‚        "UID-...-RM-000067-C3",                             â”‚
â”‚        "UID-...-RM-000089-D4"]                             â”‚
â”‚                                                             â”‚
â”‚  3. Update component parent_uids:                           â”‚
â”‚     â†’ Each component now has:                               â”‚
â”‚       parent_uids: ["UID-...-FG-000123-A1"]                â”‚
â”‚                                                             â”‚
â”‚  4. Update lifecycle for all UIDs:                          â”‚
â”‚     â†’ Finished product: "CREATED"                           â”‚
â”‚     â†’ Components: "CONSUMED_IN_PRODUCTION"                  â”‚
â”‚                                                             â”‚
â”‚  5. Record in production_assemblies table:                  â”‚
â”‚     â†’ Links production_order_id to finished_product_uid     â”‚
â”‚                                                             â”‚
â”‚  Result: Bidirectional traceability âœ…                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quality Checkpoint Extraction

```
Lifecycle Events:
[
  { stage: "RECEIVED", ... },
  { stage: "INCOMING_QC_PASSED", reference: "QC PASSED - Report #123", ... },
  { stage: "IN_PRODUCTION", ... },
  { stage: "IN_PROCESS_QC_PASSED", reference: "QC PASSED - All tests", ... },
  { stage: "FINAL_QC_PASSED", reference: "QC PASSED - Ready to ship", ... },
  { stage: "SHIPPED", ... }
]

â†“ Filter events containing "QC" or "QUALITY" or "INSPECTION"

Quality Checkpoints:
[
  {
    stage: "INCOMING_QC",
    status: "PASSED",  // Extracted from reference
    date: "2025-11-01T14:30:00Z",
    inspector: "qc_inspector@company.com",
    notes: "QC PASSED - Report #123"
  },
  {
    stage: "IN_PROCESS_QC",
    status: "PASSED",
    date: "2025-11-05T11:00:00Z",
    inspector: "production_qc@company.com",
    notes: "QC PASSED - All tests"
  },
  {
    stage: "FINAL_QC",
    status: "PASSED",
    date: "2025-11-08T16:00:00Z",
    inspector: "final_qc@company.com",
    notes: "QC PASSED - Ready to ship"
  }
]
```

---

## Vendor Extraction Logic

```
Lifecycle Events â†’ Find event with GRN reference
                â†“
         "GRN-2025-11-001"
                â†“
         Query grn table where grn_number = "GRN-2025-11-001"
                â†“
         Get vendor_id from GRN
                â†“
         Query vendors table
                â†“
         Return { code, name, contact }
```

---

## Color Coding System

### Timeline:
- **Orange Gradient Line** (#f97316 â†’ #fbbf24): Progress indicator
- **Orange Dots** (#f97316): Event markers
- **Orange/Amber Cards** (#fff7ed background): Event details

### Status Badges:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status   â”‚ Color Code                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PASSED   â”‚ bg-green-100 text-green-800 (#dcfce7)  â”‚
â”‚ FAILED   â”‚ bg-red-100 text-red-800 (#fee2e2)      â”‚
â”‚ PENDING  â”‚ bg-yellow-100 text-yellow-800 (#fef9c3)â”‚
â”‚ AVAILABLEâ”‚ bg-blue-100 text-blue-800 (#dbeafe)    â”‚
â”‚ CONSUMED â”‚ bg-purple-100 text-purple-800 (#f3e8ff)â”‚
â”‚ DEFECTIVEâ”‚ bg-red-100 text-red-800 (#fee2e2)      â”‚
â”‚ IN_REPAIRâ”‚ bg-orange-100 text-orange-800 (#ffedd5)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Responsive Design

### Desktop (> 1024px):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Timeline (66%)              â”‚ Details (33%)â”‚
â”‚                             â”‚              â”‚
â”‚ â— Event 1                   â”‚ ğŸ¢ Vendor    â”‚
â”‚ â— Event 2                   â”‚ âœ… Quality   â”‚
â”‚ â— Event 3                   â”‚ ğŸ‘¤ Customer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Component Tree (Full Width)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (< 768px):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Timeline         â”‚
â”‚ â— Event 1        â”‚
â”‚ â— Event 2        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¢ Vendor        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Quality       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ Customer      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Component Tree   â”‚
â”‚ Component 1      â”‚
â”‚ Component 2      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance Considerations

### Optimizations:
1. **Lazy Loading**: Components load after main data
2. **Caching**: Store frequently accessed UIDs
3. **Parallel Queries**: Fetch vendor/customer data simultaneously
4. **Pagination**: Limit lifecycle events displayed (show latest 50)
5. **Memoization**: Cache parsed JSON lifecycle arrays

### Query Optimization:
```sql
-- Single query with joins (better than N+1)
SELECT 
  u.*,
  i.code, i.name, i.category,
  v.code as vendor_code, v.name as vendor_name
FROM uid_registry u
LEFT JOIN items i ON u.item_id = i.id
LEFT JOIN grn g ON u.grn_id = g.id
LEFT JOIN vendors v ON g.vendor_id = v.id
WHERE u.uid = 'UID-SAIF-KOL-FG-000123-A1'
```

---

**Status:** âœ… Architecture Documented  
**Version:** 1.0.0  
**Date:** November 29, 2025
